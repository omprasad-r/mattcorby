{#
/**
 * @file
 * Theme override for the basic structure of a single Drupal page.
 *
 * Variables:
 * - logged_in: A flag indicating if user is logged in.
 * - root_path: The root path of the current page (e.g., node, admin, user).
 * - node_type: The content type for the current node, if the page is a node.
 * - head_title: List of text elements that make up the head_title variable.
 *   May contain or more of the following:
 *   - title: The title of the page.
 *   - name: The name of the site.
 *   - slogan: The slogan of the site.
 * - page_top: Initial rendered markup. This should be printed before 'page'.
 * - page: The rendered page markup.
 * - page_bottom: Closing rendered markup. This variable should be printed after
 *   'page'.
 * - db_offline: A flag indicating if the database is offline.
 * - placeholder_token: The token for generating head, css, js and js-bottom
 *   placeholders.
 *
 * @see template_preprocess_html()
 */
#}
{%
  set body_classes = [
    logged_in ? 'user-logged-in',
    not root_path ? 'path-frontpage' : 'path-' ~ root_path|clean_class,
    node_type ? 'page-node-type-' ~ node_type|clean_class,
    db_offline ? 'db-offline',
  ]
%}
<!DOCTYPE html>
<html{{ html_attributes }}>
  <head>
    <base href="/">
    <head-placeholder token="{{ placeholder_token|raw }}">
    <title>{{ head_title|safe_join(' | ') }}</title>
      <script>

var reportSuitesStr = "wmg,wmgau,wmgmaniacsau";
      
        digitalData = {
    settings: {
        reportSuites: reportSuitesStr
    },
    content: {
        artist: "Maniacs",
        label: "Warner Music International",
        sublabel: "Warner Music Australia"
    },
    page: {
        pageInfo: {
            pageName: "",
            server: "",
            platform: "Drupal 8"
        },
        category: {
            primaryCategory: "",
            pageType: ""
        }
    }
}

function getOmniturePageConfig2(path) {

      var regexPattern = {
        blog: /\/news/,
        blogDetail: /\/news\//,
        blogCategory: /\/tag\//,
        video: /\/video/,
        videoDetail: /\/video\//,
        tour: /\/tour/,
        tourDetail: /\/tour\//,
        mailinglist: /\/mailing-list/,
        store: /\/merch/,
        about: /\/about/,
        contact: /\/contact-us/,
        search: /\/search/,
        pageNotFound: /\/404/,
        pageNotFound2: /\/.+/,
        home: /\//
      };

      var pageConfig = {
        artistName: 'Maniacs',
        platform: 'Drupal 8',
        reportSuites : 'wmg,wmgau,wmgmaniacsau',
        label: 'Warner Music International',
        sublabel: 'Warner Music Australia',
        server: 'Maniacs:Site'
      };

      var pathPattern, title = "";
    
      switch (true) {
        case regexPattern.blogDetail.test(path): pathPattern = '/blogDetail'; title = path.split('/').pop(); break;
        case regexPattern.blogCategory.test(path): pathPattern = '/blogCategory'; title = path.split('/').pop(); break;
        case regexPattern.blog.test(path): pathPattern = '/blog'; break;
        case regexPattern.videoDetail.test(path): pathPattern = '/videoDetail'; title = path.split('/').pop(); break;
        case regexPattern.video.test(path): pathPattern = '/video'; break;
        case regexPattern.tourDetail.test(path): pathPattern = '/tourDetail'; title = path.split('/').pop(); break;
        case regexPattern.tour.test(path): pathPattern = '/tour'; break;
        case regexPattern.mailinglist.test(path): pathPattern = '/mailing-list'; break;
        case regexPattern.store.test(path): pathPattern = '/store'; break;
        case regexPattern.about.test(path): pathPattern = '/about'; break;
        case regexPattern.contact.test(path): pathPattern = '/contact'; break;
        case regexPattern.search.test(path): pathPattern = '/search'; break;
        case regexPattern.pageNotFound.test(path): pathPattern = "/404"; break;
        case regexPattern.pageNotFound2.test(path): pathPattern = "/404"; break;
        case regexPattern.home.test(path): pathPattern = '/'; break;
      }

      title = decodeURIComponent(title);
      let customOmniTitle = title ? title.charAt(0).toUpperCase() + title.substr(1).toLowerCase() : '';
      customOmniTitle = customOmniTitle.split('-').join(' ');
      console.log("customOmniTitle is : " + customOmniTitle);

      var page = {
        '/': {
            pageInfo: {
                pageName: pageConfig.artistName + ':Homepage',
            },
            category: {
                primaryCategory: pageConfig.artistName + ':Home',
                pageType: 'homepage'
            }
        },
        '/video': {
            pageInfo: {
                pageName: pageConfig.artistName + ':Videos',
            },
            category: {
                primaryCategory: pageConfig.artistName + ':Videos',
                pageType: 'videos:landing'
            }
        },
        '/videoDetail': {
            pageInfo: {
                pageName: pageConfig.artistName + ':Videos:' + customOmniTitle,
            },
            category: {
                primaryCategory: pageConfig.artistName + ':Videos',
                pageType: 'videos:details'
            }
        },
        '/tour': {
            pageInfo: {
                pageName: pageConfig.artistName + ':Tour',
            },
            category: {
                primaryCategory: pageConfig.artistName + ':Tour',
                pageType: 'Tour:Upcoming'
            }
        },
        '/tourDetail': {
            pageInfo: {
                pageName: pageConfig.artistName + ':Tour:' + customOmniTitle,
            },
            category: {
                primaryCategory: pageConfig.artistName + ':Tour',
                pageType: 'tour:details'
            }
        },
        '/blog': {
            pageInfo: {
                pageName: pageConfig.artistName + ':News',
            },
            category: {
                primaryCategory: pageConfig.artistName + ':News',
                pageType: 'news:landing'
            }
        },
        '/blogDetail': {
            pageInfo: {
                pageName: pageConfig.artistName + ':News:' + customOmniTitle
            },
            category: {
                primaryCategory: pageConfig.artistName + ':News',
                pageType: 'news:article'
            }
        },
        '/blogCategory': {
            pageInfo: {
                pageName: pageConfig.artistName + ':News:' + customOmniTitle
            },
            category: {
                primaryCategory: pageConfig.artistName + ':News',
                pageType: 'news:category'
            }
        },
        '/store': {
            pageInfo: {
                pageName: pageConfig.artistName + ':Store'
            },
            category: {
                primaryCategory: pageConfig.artistName + ':Store',
                pageType: 'store:landing'
            }
        },
        '/about': {
            pageInfo: {
                pageName: pageConfig.artistName + ':About'
            },
            category: {
                primaryCategory: pageConfig.artistName + ':About',
                pageType: 'about'
            }
        },
        '/contact': {
            pageInfo: {
                pageName: pageConfig.artistName + ':Contact Us'
            },
            category: {
                primaryCategory: pageConfig.artistName + ':Contact Us',
                pageType: 'contact us'
            }
        },
        '/mailing-list': {
            pageInfo: {
                pageName: pageConfig.artistName + ':Mailing List Sign-up'
            },
            category: {
                primaryCategory: pageConfig.artistName + ':Mailing List Sign-up',
                pageType: 'mailing list sign-up'
            }
        },
        '/search': {
            pageInfo: {
                pageName: pageConfig.artistName + ':Search:Results',
                // onsiteSearchTerms: '',
                // onsiteSearchResults: ''
            },
            category: {
                primaryCategory: pageConfig.artistName + ':Search',
                pageType: 'search:results'
            }
        },
        //"/**": {
        "/404": {
                pageInfo: {
                    pageName: pageConfig.artistName + ":404 Error",

                },
                category: {
                    primaryCategory: pageConfig.artistName + ":Error",
                    pageType: "Error"
                }
            }
      }

      var data = page[pathPattern];
      data.pageConfig = pageConfig;
      return data;
    }
        
        var pathname = window.location.pathname;
        var result = getOmniturePageConfig2(pathname);
    digitalData = {
        settings: {
            reportSuites: result.pageConfig.reportSuites || ""
        },
        page: {
            pageInfo: {
                pageName: result.pageInfo.pageName || "",
                server: result.pageConfig.server || "",
                platform: result.pageConfig.platform || ""
            },
            category: {
                primaryCategory: result.category.primaryCategory || "",
                pageType: result.category.pageType || ""
            }
        },
        content: {
            artist: result.pageConfig.artistName || "",
            label: result.pageConfig.label || "",
            sublabel: result.pageConfig.sublabel || ""
        }
    };

    </script>  
        
    <css-placeholder token="{{ placeholder_token|raw }}">
       
        
    <js-placeholder token="{{ placeholder_token|raw }}">
	
	<!-- Hammer JS -->
	<script type="text/javascript" src="/{{ base_path ~ directory }}/lib/hammer.js"></script>	
	
	<link href="/{{ base_path ~ directory }}/assets/normalize.css" rel="stylesheet" />
	<link href="/{{ base_path ~ directory }}/css/global-style.css" rel="stylesheet" />
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/gridlex/2.0.8/gridlex.min.css">
<link href="/{{ base_path ~ directory }}/styles.fb940325ef48245c9820.bundle.css" rel="stylesheet" />
  <!--<script src="http://assets.adobedtm.com/31543e7db99435a92d6f4a2cf97c808672ed7dd0/satelliteLib-b6e3529c31d92a9252c30c1714b6b9342304145b.js"></script>-->
  <script type="text/javascript" src="https://libraries.wmgartistservices.com/pplightbox/lightbox.js"></script>
<link rel="stylesheet" type="text/css" href="https://libraries.wmgartistservices.com/pplightbox/lightbox-light.css"/>
 <link rel="stylesheet" href="https://use.typekit.net/ttw1dso.css">
 <link href="https://fonts.googleapis.com/css?family=Merriweather+Sans:300,400,700,800&amp;subset=latin-ext" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Roboto:400,500,700,800,900" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.css" />
<script id="songkick" src="http://libraries.wmgartistservices.com/songkick/angular/songkick.js" async></script>
 <script async='async' src='https://www.googletagservices.com/tag/js/gpt.js'></script>
 <script src="https://apis.google.com/js/platform.js"></script>
  <script>
    var googletag = googletag || {};
    googletag.cmd = googletag.cmd || [];
  </script>
        <script src="//assets.adobedtm.com/31543e7db99435a92d6f4a2cf97c808672ed7dd0/satelliteLib-b6e3529c31d92a9252c30c1714b6b9342304145b.js"></script>
  </head>
  <body{{ attributes.addClass(body_classes) }}>
    
    {{ page_top }}
    {{ page }}
    {{ page_bottom }}
<script type="text/javascript" src="/{{ base_path ~ directory }}/inline.afbf881b4e9c4ebe5c14.bundle.js"></script>
<script type="text/javascript" src="/{{ base_path ~ directory }}/polyfills.db14439f9ce56385d621.bundle.js"></script>
<script type="text/javascript" src="/{{ base_path ~ directory }}/vendor.c19594e542a246aa7bc8.bundle.js"></script>
<script type="text/javascript" src="/{{ base_path ~ directory }}/mmain.ec86caa6d6fb610c7699.bundle.js"></script>
   <js-bottom-placeholder token="{{ placeholder_token|raw }}">

  </body>
</html>
